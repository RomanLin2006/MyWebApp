<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã—Ö –ª–∏—Ü–µ–Ω–∑–∏–π</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="auth-styles.css">
</head>
<body>
    <div class="app-container">
      <header class="app-header">
        <h1 class="app-title">
          <span class="app-icon">üç∫</span>
          –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã—Ö –ª–∏—Ü–µ–Ω–∑–∏–π
        </h1>
        
        <!-- –ö–Ω–æ–ø–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
        <div class="auth-buttons" id="authButtons">
          <button class="btn btn-outline-light btn-sm me-2" id="loginBtn">
            <i class="bi bi-box-arrow-in-right"></i> –í—Ö–æ–¥
          </button>
          <button class="btn btn-light btn-sm" id="registerBtn">
            <i class="bi bi-person-plus"></i> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
          </button>
        </div>
        
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
        <div class="user-info" id="userInfo" style="display: none;">
          <div class="user-details">
            <button class="btn btn-outline-light btn-sm me-2" id="favoritesBtn">
              <i class="bi bi-star"></i> –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
              <span class="badge bg-warning text-dark ms-1" id="favoritesCount" style="display: none;">0</span>
            </button>
            <span class="user-name" id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
            <button class="btn btn-outline-light btn-sm ms-2" id="logoutBtn">
              <i class="bi bi-box-arrow-right"></i> –í—ã—Ö–æ–¥
            </button>
          </div>
        </div>
      </header>

      <!-- –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–≤—ã–ø–∞–¥–∞—é—â–∞—è) -->
      <div class="filters-panel-container">
        <div class="filters-trigger" id="filtersTrigger">
          <div class="trigger-content">
            <span class="trigger-icon">‚öôÔ∏è</span>
            <span class="trigger-text">–§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫</span>
            <span class="trigger-arrow">‚ñº</span>
          </div>
        </div>
        
        <div class="filters-panel" id="filtersPanel">
          <div class="container-fluid">
            <div class="row g-3">
              <!-- –ü–æ–∏—Å–∫ —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º -->
              <div class="col-md-12 col-lg-4">
                <label for="searchInput" class="form-label">
                  <span class="label-icon">üîç</span> –ü–æ–∏—Å–∫
                </label>
                <div class="search-wrapper">
                  <input
                    type="text"
                    id="searchInput"
                    class="form-control search-input"
                    placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ, –∞–¥—Ä–µ—Å, –ò–ù–ù..."
                    autocomplete="off"
                  />
                  <div id="autocompleteResults" class="autocomplete-results"></div>
                </div>
              </div>

              <!-- –°—Ç–∞—Ç—É—Å –ª–∏—Ü–µ–Ω–∑–∏–∏ -->
              <div class="col-md-6 col-lg-2">
                <label for="statusFilter" class="form-label">
                  <span class="label-icon">üìä</span> –°—Ç–∞—Ç—É—Å
                </label>
                <select id="statusFilter" class="form-select">
                  <option value="">–í—Å–µ</option>
                  <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                  <option value="expiring_soon">–°–∫–æ—Ä–æ –∏—Å—Ç–µ–∫–∞—é—Ç</option>
                  <option value="expired">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ</option>
                </select>
              </div>

              <!-- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥ -->
              <div class="col-md-6 col-lg-2">
                <label for="admAreaFilter" class="form-label">
                  <span class="label-icon">üèõÔ∏è</span> –û–∫—Ä—É–≥
                </label>
                <select id="admAreaFilter" class="form-select">
                  <option value="">–í—Å–µ –æ–∫—Ä—É–≥–∞</option>
                </select>
              </div>

              <!-- –†–∞–π–æ–Ω -->
              <div class="col-md-6 col-lg-2">
                <label for="districtFilter" class="form-label">
                  <span class="label-icon">üìç</span> –†–∞–π–æ–Ω
                </label>
                <select id="districtFilter" class="form-select">
                  <option value="">–í—Å–µ —Ä–∞–π–æ–Ω—ã</option>
                </select>
              </div>

              <!-- –¢–∏–ø –ª–∏—Ü–µ–Ω–∑–∏–∏ -->
              <div class="col-md-6 col-lg-2">
                <label for="licenseTypeFilter" class="form-label">
                  <span class="label-icon">üìã</span> –¢–∏–ø
                </label>
                <select id="licenseTypeFilter" class="form-select">
                  <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                </select>
              </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="row mt-3">
              <div class="col-12">
                <div class="d-flex gap-2">
                  <button id="loadBtn" class="btn btn-primary btn-action">
                    <span class="btn-icon">üîÑ</span> –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ—á–∫–∏
                  </button>
                  <button id="clearFiltersBtn" class="btn btn-secondary btn-action">
                    <span class="btn-icon">üóëÔ∏è</span> –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                  </button>
                  <div class="ms-auto">
                    <span id="pointsCount" class="badge badge-info">0 —Ç–æ—á–µ–∫</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- –ö–∞—Ä—Ç–∞ -->
      <div id="map"></div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞ -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="loginModalLabel">
              <i class="bi bi-box-arrow-in-right"></i> –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
          </div>
          <div class="modal-body">
            <form id="loginForm">
              <div class="mb-3">
                <label for="loginEmail" class="form-label">Email –∞–¥—Ä–µ—Å</label>
                <input type="email" class="form-control" id="loginEmail" required 
                       placeholder="example@mail.com">
                <div class="form-text">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email –¥–ª—è –≤—Ö–æ–¥–∞</div>
              </div>
              <div class="mb-3">
                <label for="loginPassword" class="form-label">–ü–∞—Ä–æ–ª—å</label>
                <input type="password" class="form-control" id="loginPassword" required 
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                <div class="form-text">
                  <a href="#" class="text-decoration-none">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
                </div>
              </div>
              <div class="d-grid">
                <button type="submit" class="btn btn-primary">
                  <i class="bi bi-box-arrow-in-right"></i> –í–æ–π—Ç–∏
                </button>
              </div>
            </form>
            <div class="text-center mt-3">
              <span>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? </span>
              <a href="#" class="text-decoration-none" id="showRegisterFromLogin">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="registerModalLabel">
              <i class="bi bi-person-plus"></i> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
          </div>
          <div class="modal-body">
            <form id="registerForm">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="registerFirstName" class="form-label">–ò–º—è</label>
                  <input type="text" class="form-control" id="registerFirstName" 
                         placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
                </div>
                <div class="col-md-6 mb-3">
                  <label for="registerLastName" class="form-label">–§–∞–º–∏–ª–∏—è</label>
                  <input type="text" class="form-control" id="registerLastName" 
                         placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é">
                </div>
              </div>
              
              <div class="mb-3">
                <label for="registerEmail" class="form-label">Email –∞–¥—Ä–µ—Å *</label>
                <input type="email" class="form-control" id="registerEmail" required 
                       placeholder="example@mail.com">
                <div class="form-text">–£–∫–∞–∂–∏—Ç–µ –¥–µ–π—Å—Ç–≤—É—é—â–∏–π email –∞–¥—Ä–µ—Å</div>
              </div>
              
              <div class="mb-3">
                <label for="registerPhone" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" class="form-control" id="registerPhone" 
                       placeholder="+7 (999) 123-45-67">
              </div>
              
              <div class="mb-3">
                <label for="registerPassword" class="form-label">–ü–∞—Ä–æ–ª—å *</label>
                <input type="password" class="form-control" id="registerPassword" required 
                       placeholder="–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤">
                <div class="form-text">
                  –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤, –≤–∫–ª—é—á–∞—è –∑–∞–≥–ª–∞–≤–Ω—ã–µ –∏ —Å—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
                </div>
              </div>
              
              <div class="mb-3">
                <label for="registerPasswordConfirm" class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è *</label>
                <input type="password" class="form-control" id="registerPasswordConfirm" required 
                       placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
              </div>
              
              <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–æ–Ω–µ –ü–î –∏ —Å–æ–≥–ª–∞—Å–∏–µ -->
              <div class="alert alert-info">
                <h6><i class="bi bi-info-circle"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—â–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</h6>
                <p class="mb-2">
                  –í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–º –∑–∞–∫–æ–Ω–æ–º ‚Ññ 152-–§–ó "–û –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö" –æ—Ç 27.07.2006 –≥.,
                  –º—ã —Å–æ–æ–±—â–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–µ:
                </p>
                <ul class="mb-2 small">
                  <li>–í–∞—à–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–§–ò–û, email, —Ç–µ–ª–µ—Ñ–æ–Ω) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å –≤–∞—à–µ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è</li>
                  <li>–î–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–∏—Å—É</li>
                  <li>–ú—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–µ–º –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º –±–µ–∑ –≤–∞—à–µ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è</li>
                  <li>–í—ã –∏–º–µ–µ—Ç–µ –ø—Ä–∞–≤–æ –Ω–∞ –¥–æ—Å—Ç—É–ø, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö</li>
                  <li>–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—â–∏—â–µ–Ω–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</li>
                </ul>
                <p class="mb-0 small">
                  –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ <a href="#" class="text-decoration-none">–ü–æ–ª–∏—Ç–∏–∫–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>.
                </p>
              </div>
              
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="privacyPolicy" required>
                <label class="form-check-label" for="privacyPolicy">
                  –Ø –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω(–∞) –∏ —Å–æ–≥–ª–∞—Å–µ–Ω(–Ω–∞) —Å <a href="#" class="text-decoration-none">–ü–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a> *
                </label>
              </div>
              
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="dataProcessingConsent" required>
                <label class="form-check-label" for="dataProcessingConsent">
                  –Ø –¥–∞—é —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –º–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –§–ó-152 "–û –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö" *
                </label>
              </div>
              
              <div class="d-grid">
                <button type="submit" class="btn btn-primary">
                  <i class="bi bi-person-plus"></i> –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
              </div>
            </form>
            
            <div class="text-center mt-3">
              <span>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? </span>
              <a href="#" class="text-decoration-none" id="showLoginFromRegister">–í–æ–π—Ç–∏</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π -->
    <div class="modal fade" id="favoritesModal" tabindex="-1" aria-labelledby="favoritesModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="favoritesModalLabel">
              <i class="bi bi-star"></i> –ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
          </div>
          <div class="modal-body">
            <div id="favoritesContent">
              <div class="text-center">
                <div class="spinner-border text-primary" role="status">
                  <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                </div>
                <p class="mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- –ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
    <script src="auth.js"></script>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç -->
    <script src="app.js"></script>
</body>
</html>