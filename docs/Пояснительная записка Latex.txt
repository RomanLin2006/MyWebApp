\documentclass[a4paper,14pt]{extarticle}

\usepackage{float}
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}

\usepackage{tempora} 

\usepackage[left=30mm,right=15mm,top=20mm,bottom=20mm]{geometry}

\usepackage{setspace}
\onehalfspacing 
\usepackage{microtype} 
\emergencystretch=1em 
\usepackage{indentfirst} 
\setlength{\parindent}{1.25cm} 

\setlength{\parskip}{8pt} 

\usepackage{titlesec}

\titleformat{\section}
  {\normalfont\fontsize{16pt}{19.2pt}\bfseries} 
  {\thesection} 
  {1em} 
  {}

\titlespacing*{\section}{1.25cm}{*3}{10pt} 

\titleformat{\subsection}
  {\normalfont\fontsize{14pt}{16.8pt}\bfseries}
  {\thesubsection}
  {1em}
  {}
  
\titlespacing*{\subsection}{1.25cm}{*2}{10pt}

\usepackage{graphicx}
\usepackage{hyperref}
\hypersetup{colorlinks=true, allcolors=black}

\usepackage{enumitem}
\setlist[enumerate]{
    wide=1.25cm,
    leftmargin=0pt,     
    labelsep=0.5em,      
    itemsep=8pt,      
    topsep=0pt,
    partopsep=0pt, 
    parsep=0pt
}

\setlist[itemize]{
    wide=1.25cm, 
    leftmargin=0pt, 
    labelsep=0.5em, 
    itemsep=10pt, 
    topsep=0pt, 
    partopsep=0pt, 
    parsep=0pt
}

\usepackage{caption}
\addto\captionsrussian{\renewcommand{\figurename}{Рисунок}}
\DeclareCaptionLabelSeparator{emdash}{ --- } 
\captionsetup[figure]{
    labelsep=emdash,
    justification=centering,
    singlelinecheck=false  
}

\usepackage{fancyvrb}

\begin{document}

% --- ТИТУЛЬНЫЙ ЛИСТ ---
\begin{titlepage}
    \begin{center}
        \begin{spacing}{1.0}
            \fontsize{12pt}{14.4pt}\selectfont
            МИНИСТЕРСТВО НАУКИ И ВЫСШЕГО ОБРАЗОВАНИЯ РОССИЙСКОЙ ФЕДЕРАЦИИ\\
            ФЕДЕРАЛЬНОЕ ГОСУДАРСТВЕННОЕ АВТОНОМНОЕ ОБРАЗОВАТЕЛЬНОЕ\\
            УЧРЕЖДЕНИЕ ВЫСШЕГО ОБРАЗОВАНИЯ\\
            \textbf{«МОСКОВСКИЙ ПОЛИТЕХНИЧЕСКИЙ УНИВЕРСИТЕТ»\\
            (МОСКОВСКИЙ ПОЛИТЕХ)}
        \end{spacing}
        
        \vspace{0.5 cm}
        % Возвращаемся к 14 кеглю
        \fontsize{14pt}{16.8pt}\selectfont
        Факультет информационных технологий\\
        Кафедра «Инфокогнитивные технологии»
        \vfill
        
        {\setstretch{1.1}
        \textbf{\fontsize{16pt}{19.2pt}\selectfont КУРСОВОЙ ПРОЕКТ}\\
        \vspace{0.5cm}
        \fontsize{14pt}{16.8pt}\selectfont
        на тему: «\textit{Разработка веб-приложения для визуального мониторинга статуса алкогольных лицензий предприятий Москвы.}»\\
        }
        
        \fontsize{14pt}{16.8pt}\selectfont
        Направление подготовки 09.03.03 «Прикладная информатика»\\
        Профиль «Разработка и интеграция бизнес приложений»
        \vfill
        
        \begin{flushright}
            \fontsize{14pt}{16.8pt}\selectfont
            \textbf{Выполнил:}\\
            студент группы 241-361\\
            Линейцев Роман Алексеевич\\
            \vspace{0.5cm}
            26.01.2026 \rule{4cm}{0.15mm}\\
            \fontsize{10pt}{12pt}\selectfont (подпись) 
        \end{flushright}
        
        \vfill
        \fontsize{14pt}{16.8pt}\selectfont
        Москва 2026
    \end{center}
\end{titlepage}

\newpage
\setcounter{page}{2}

% --- ВВЕДЕНИЕ ---
\section*{Введение}
\addcontentsline{toc}{section}{Введение}
% Принудительный отступ для не нумерованного заголовка
В современных условиях развитой цифровой инфраструктуры открытые данные имеют большую роль в аналитике и функционарировании множества областей. Правительство Москвы активно публикует сведения о деятельности различных сфер городской экономики, включая реестры лицензий на розничную продажу алкогольной продукции. Актуальность данной работы обусловлена необходимостью предоставления удобного доступа к этой информации для широкого круга лиц: от контролирующих органов до конечных потребителей и представителей бизнеса.

Предметная область работы затрагивает сферу лицензирования и мониторинга деятельности предприятий общественного питания и торговли. На сегодняшний день в Москве зарегистрированы тысячи объектов, обладающих лицензиями, статус которых напрямую влияет на легитимность их деятельности и безопасность потребителей.

Проблематика состоит в том, что официальные реестры открытых данных зачастую представлены в виде массивных таблиц или файлов в форматах JSON/XML, которые крайне сложны в анализе для рядовых пользователей. Отсутствие географической привязки и инструментов визуализации затрудняет быстрый мониторинг информации. Для контролирующих органов это означает сложность в выявлении зон концентрации нарушений, для бизнеса — трудности в анализе конкурентной среды, а для граждан — отсутствие возможности мгновенно проверить легальность торговой точки.

В качестве решения предлагается разработка веб-приложения, которое интегрирует открытые данные в интерактивную карту с применением алгоритмов кластеризации (k-means) для анализа плотности распределения объектов. Это позволит трансформировать «сырые» данные в эффективный инструмент мониторинга и поддержки принятия решений.

\newpage

% --- ПОСТАНОВКА ЗАДАЧИ ---
\section{Постановка задачи}

Цель работы — разработать клиентоориентированное веб-приложение для визуального мониторинга статуса алкогольных лицензий предприятий Москвы на основе открытых данных, обеспечивающее наглядное представление информации и аналитическую поддержку пользователей.

Задачи:
\begin{enumerate}
    \item Анализ предметной области и проектирование базы данных: изучение структуры наборов данных Правительства Москвы и разработка реляционной модели в СУБД MySQL.
    \item Проектирование архитектуры приложения: описание взаимодействия между Backend-частью (Flask) и Frontend-интерфейсом.
    \item Реализация серверной логики: создание механизмов обработки данных, системы фильтрации и расширенного поиска.
    \item Создание аналитического модуля: реализация алгоритма k-means кластеризации для выявления зон высокой плотности предприятий с просрочнными лицензиями.
    \item Разработка пользовательского интерфейса: создание интерактивной карты на базе Leaflet.js с цветовой индикацией статусов.
    \item Тестирование и развертывание:проверка корректности работы алгоритмов и точности навигации.
\end{enumerate}

Исходные данные: В работе используется актуальный датасет «Реестр лицензий на розничную продажу алкогольной продукции» с Портала открытых данных Правительства Москвы (data.mos.ru).


Выбранные средства разработки:
\begin{enumerate}
    \item Python, Flask — разработка серверной логики и API;
    \item MySQL — хранение и структурирование данных;
    \item JavaScript, Leaflet.js — создание интерактивной карты;
    \item HTML5, CSS3 — проектирование визуального интерфейса.
\end{enumerate}


% --- ПРОЕКТИРОВАНИ И РАЗРАБОТКА ---
\section{Проектирование и разработка}

\newcommand{\code}[1]{{\small\texttt{#1}}}

Разработанное веб-приложение представляет собой систему для визуального мониторинга и аналитики статусов алкогольных лицензий предприятий Москвы. Приложение предоставляет интуитивно понятный картографический интерфейс, позволяющий в реальном времени оценивать ситуацию на рынке. Также у приложения есть удобное меню для фильтров, поиска предприятий и анализа зон их концентрации, возможность анализа похожих предприятий и добавления их в избранные.

На рисунке 1 представлена Диаграмма вариантов использования, описывающая сценарии взаимодействия с системой для двух  ролей пользователей: «Гость» и «Авторизованный пользователь». У Гостя есть доступ к работе с интерактивной картой, поиском и фильтрами. Функции анализа похожих объектов и добавления в избранное представлены как расширения (<<extend>>) основного сценария просмотра информации о предприятии, при этом добавление в избранное строго включает (<<include>>) в себя процесс авторизации. Авторизованный пользователь, наследуя все права гостя, получает доступ к персональному разделу для управления списком избранных предприятий, возможности их быстрого поиска на карте и удаления, а также завершения сессии через выход из системы.

\begin{figure}[H]
    \centering
    % Устанавливаем ширину ровно в ширину текстового поля
    \includegraphics[width=\textwidth]{usecase_diagram.png.png} 
    \caption{Физическая модель базы данных}
    \label{fig:usecase}
\end{figure}

На основе открытого набора данных Правительства Москвы была разработана физическая модель базы данных, реализованная средствами СУБД MySQL (рисунок 2). Ключевым элементом структуры является таблица \code{companies}, которая содержит подробные сведения о лицензиатах, включая ИНН, юридические адреса, временные метки действия лицензий и географические координаты для визуализации объектов на карте. Вспомогательные таблицы, такие как: \code{adm\_areas}, \code{districts} и \code{license\_types} - выполняют роль справочников и хранят сведения об административных округах, районах и типах лицензий соответственно. Данные таблицы связаны с основной таблицей \code{companies} с помощью внешних ключей. Для реализации персонального функционала предусмотрена таблица \code{user\_favorites}, обеспечивающая связь многие-ко-многим между пользователями системы и предприятиями, которые они добавляют в избранные.

\begin{figure}[H]
    \centering
    % Устанавливаем ширину ровно в ширину текстового поля
    \includegraphics[width=\textwidth]{database_diagram.png} 
    \caption{Физическая модель базы данных}
    \label{fig:usecase}
\end{figure}

На рисунке 3 представлена Диаграмма классов веб-приложения. Основной файл \code{app.py} является центральным backend-сервером, который использует \code{auth.py} для проверки авторизации пользователей перед доступом к функциям вроде избранных предприятий, а также использует \code{load\_data\_local.py} для автоматического обновления данных о лицензиях из API Москвы. На стороне фронтенда \code{index.html} служит структурой страницы, подключая \code{styles.css} для основного визуального оформления и \code{auth-styles.css} для стилизации модальных окон аутентификации, а также загружает \code{auth.js} для управления входом и регистрацией пользователей и \code{app.js} для основной логики приложения. Файл \code{app.js} постоянно взаимодействует с backend-сервером через API для получения данных о компаниях, фильтрации и поиска, при этом использует \code{auth.js} для проверки авторизации пользователя. В свою очередь \code{auth.js} общается с \code{app.py} для обработки операций входа, регистрации и проверки сессии, а также манипулирует элементами \code{index.html} для отображения модальных окон и обновления интерфейса в зависимости от статуса авторизации. Таким образом создается замкнутая система, где backend обеспечивает обработку данных и аутентификацию, а frontend предоставляет пользовательский интерфейс.

\begin{figure}[H]
    \centering
    % Устанавливаем ширину ровно в ширину текстового поля
    \includegraphics[width=\textwidth]{clases_diagram.png} 
    \caption{Физическая модель базы данных}
    \label{fig:usecase}
\end{figure}

\section{Реализация приложения}

Backend часть приложения была реализована на фреймворке \code{Flask} с созданием основного файла \code{app.py}, который содержит все API и логику приложения. Центральным элементом стала функция \code{create\_app()}, которая настраивает приложение, подключает базу данных \code{MySQL} через \code{get\_db\_connection()} (Листинг 1) и инициализирует систему аутентификации. Для обработки пользовательских данных был разработан отдельный модуль \code{auth.py}, содержащий класс \code{AuthManager} с методами \code{register\_user()} для безопасной регистрации с хэшированием паролей через \code{hash\_password()} (Листинг 2) и \code{login\_user()} для аутентификации с генерацией токенов сессии через \code{generate\_session\_token()} (Листинг 3). Особое внимание было уделено безопасности данных через использование параметризованных запросов и хэширования \code{Argon2}.

Для загрузки и обработки данных о лицензиях был создан модуль \code{load\_data\_local.py}, который реализует взаимодействие с API данных Правительства Москвы. Основная функция \code{load\_all\_data()} (Листинг 4) выполняет загрузку записей с автоматической обработкой пагинации, а функция \code{process\_company()} обеспечивает фильтрацию дубликатов по ИНН и адресу, сохраняя только актуальные версии записей. В процессе реализации была решена задача предобработки геоданных через \code{extract\_coordinates()} для извлечения координат из различных форматов JSON, что позволило корректно отображать предприятия на карте.

Frontend часть приложения была разработана с использованием \code{JavaScript} и библиотеки \code{Leaflet} для интерактивной карты. В файле \code{app.js} была реализована основная логика приложения, включая \code{initMap()} (Листинг 5) для создания карты с настраиваемыми слоями и элементами управления. Функция \code{loadCompanies()} обеспечивает динамическую загрузку предприятий с учетом масштаба карты и фильтров, автоматически адаптируя количество загружаемых точек для оптимизации производительности. Для визуализации данных была реализована система цветовой индикации статусов лицензий через \code{getColorByStatusColor()} и создание интерактивных маркеров с popup-окнами, содержащими детальную информацию о предприятиях.

Система аутентификации на клиентской стороне была реализована в файле \code{auth.js} через класс \code{AuthManagerClient} с методами \code{handleLogin()} и \code{handleRegister()} (Листинг 6) для обработки форм входа и регистрации с клиентской валидацией. Особенностью реализации стало использование \code{localStorage} для хранения токенов сессии и автоматическая проверка их валидности при загрузке страницы через \code{validateSession()}. Для управления пользовательским интерфейсом были разработаны функции обновления состояния кнопок и счетчиков в зависимости от статуса авторизации.

Визуальная часть приложения была создана с использованием CSS-фреймворка \code{Bootstrap} и кастомных стилей. Файл \code{styles.css} (Листинг 7) определяет общую цветовую схему приложения с зелеными акцентами, стили для карты, маркеров и popup-окон, а также обеспечивает адаптивность дизайна для мобильных устройств. Дополнительный файл \code{auth-styles.css} содержит стили для модальных окон аутентификации с градиентными заголовками и кастомными элементами форм.

В процессе реализации были решены задачи интеграции всех модулей в единую систему. Backend API обеспечивает обработку запросов на получение данных о компаниях через \code{get\_companies()} (Листинг 8) с поддержкой фильтрации по статусу лицензии, административному округу, району и типу лицензии. Для работы с избранными предприятиями были созданы соответствующие эндпоинты, использующие \code{validate\_session()} из \code{AuthManager} для проверки авторизации перед выполнением операций. На frontend была реализована функция \code{toggleFavorite()} (Листинг 9) для добавления и удаления предприятий из избранного с обновлением интерфейса в реальном времени.

Особое внимание было уделено оптимизации производительности через реализацию динамической загрузки данных в зависимости от масштаба карты, кэширования результатов поиска и использования асинхронных запросов. Для анализа данных была реализована функция \code{findSimilarCompanies()} (Листинг 10) для поиска предприятий с аналогичными типами лицензий в заданном радиусе, а также интеграция с \code{k-means} кластеризацией для выявления зон концентрации просроченных лицензий.

\section{Основные сценарии использования приложения}

\section*{Заключение}

\newpage
\section*{Список литературы и интернет-ресурсов}
Реестр лицензий на розничную продажу алкогольной продукции // Портал открытых данных Правительства Москвы. — URL: https://data.mos.ru/opendata/7710152113-reestr-litsenziy-na-roznichnuyu-prodaju-alkogolnoy-produktsii (дата обращения: 18.01.2026).

Гринберг, М. Разработка веб-приложений с использованием Flask на языке Python / М. Гринберг. — М. : ДМК Пресс, 2016. — 272 с.

Argon2: the memory-hard function for password hashing and other applications. RFC 9106 // IETF Datatracker. — URL: https://datatracker.ietf.org/doc/html/rfc9106 (дата обращения: 18.01.2026).

Leaflet — an open-source JavaScript library for mobile-friendly interactive maps. — URL: https://leafletjs.com (дата обращения: 18.01.2026).

Bootstrap — The most popular HTML, CSS, and JS library in the world. — URL: https://getbootstrap.com (дата обращения: 18.01.2026).

Джеймс, Г. Введение в статистическое обучение с примерами на языке R / Г. Джеймс, Д. Уиттон, Т. Хасти, Р. Тибширани ; пер. с англ. С. Э. Мастицкого. — М. : ДМК Пресс, 2016. — 456 с. (Основы k-means кластеризации).

\section*{Приложение}

Листинг 1 — функция \code{get\_db\_connection()}
\begin{Verbatim}[fontsize=\fontsize{12pt}{14.4pt}\selectfont, xleftmargin=1.25cm]
def get_db_connection():
    try:
        conn = mysql.connector.connect(**app.config["DB_CONFIG"])
        return conn
    except Error as e:
        print(f"Ошибка подключения к БД: {e}")
        import traceback
        traceback.print_exc()
        return None
\end{Verbatim}








\end{document}